<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
</head>
<body>
    <script>
        // Функция для извлечения параметров из фрагмента URL
        function getHashParams() {
            var hashParams = {};
            var e, r = /([^&;=]+)=?([^&;]*)/g,
                q = window.location.hash.substring(1);
            while ( e = r.exec(q)) {
                hashParams[e[1]] = decodeURIComponent(e[2]);
            }
            return hashParams;
        }

        // Получаем параметры
        var params = getHashParams();

        // Создаем форму для отправки данных
        var form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", "http://127.0.0.1:8000/auth/yandex_token");

        // Для каждого параметра создаем скрытый элемент формы
        Object.keys(params).forEach(function(key) {
            var field = document.createElement("input");
            field.setAttribute("type", "hidden");
            field.setAttribute("name", key);
            field.setAttribute("value", params[key]);
            form.appendChild(field);
        });

        // Добавляем форму в документ и отправляем ее
        document.body.appendChild(form);
        form.submit();
    </script>
</body>
</html>
